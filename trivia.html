<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trivia Parque Angostura</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Feedback colors */
    .correct { color: #155724; background: #d4edda; padding: 8px; border-radius: 4px; }
    .incorrect { color: #721c24; background: #f8d7da; padding: 8px; border-radius: 4px; }
    /* Botones de opciones y siguiente */
    .btn { margin: 6px 6px 0 0; padding: 8px 12px; border: none; background:#007bff; color:#fff; border-radius:4px; cursor:pointer; }
    .btn:disabled { opacity: 0.6; cursor: default; }
  </style>
</head>
<body>
  <header>
    <h1>Trivia Parque Angostura</h1>
  </header>

  <main>
    <div id="inicio">
      <h2>Ingresa tu nombre para comenzar</h2>
      <input type="text" id="nombreJugador" placeholder="Tu nombre">
      <button onclick="iniciarTrivia()">Comenzar</button>
    </div>

    <div id="trivia" style="display:none;">
      <h2 id="pregunta"></h2>
      <div id="opciones"></div>
      <div id="feedback" style="margin-top:12px;"></div>
    </div>

    <div id="resultado" style="display:none;">
      <h2>¬°Trivia finalizada!</h2>
      <p id="mensajeFinal"></p>
      <div id="ranking"></div>
      <button onclick="reiniciar()">Jugar de nuevo</button>
    </div>
  </main>

  <div class="botones">
    <a href="index.html" class="btn">Retornar</a>
  </div>

  <footer>
    <p>Proyecto tur√≠stico interactivo - Parque Angostura</p>
  </footer>

  <script>
    const preguntas = [
      {
        pregunta: "¬øQu√© tipo de ecosistema predomina en el Parque Angostura?",
        opciones: [
          "Desierto",
          "Bosque templado",
          "Selva tropical"
        ],
        correcta: 2,
        explicacion: "El Parque Angostura es mayoritariamente bosque templado."
      },
      {
        pregunta: "¬øEn qu√© comuna se encuentra el Parque Angostura?",
        opciones: [
          "Concepci√≥n",
          "Puc√≥n",
          "Santa B√°rbara"
        ],
        correcta: 3,
        explicacion: "El Parque se ubica en la comuna de Santa B√°rbara."
      },
      {
        pregunta: "¬øCu√°l es el objetivo principal del Parque?",
        opciones: [
          "Construcci√≥n urbana",
          "Promover el turismo sustentable",
          "Explotaci√≥n forestal"
        ],
        correcta: 2,
        explicacion: "El objetivo es promover el turismo sustentable."
      },
      {
        pregunta: "¬øQu√© especie de √°rbol es caracter√≠stica del Parque Angostura?",
        opciones: [
          "Coig√ºe",
          "Pino",
          "Eucalipto"
        ],
        correcta: 1,
        explicacion: "El Coig√ºe puede vivir m√°s de 400 a√±os y alcanzar hasta 40 metros de altura."
      },
      {
        pregunta: "¬øQu√© actividad es com√∫n realizar en el Parque Angostura?",
        opciones: [
          "Surf",
          "Senderismo",
          "Esqu√≠"
        ],
        correcta: 2,
        explicacion: "El senderismo es una actividad habitual en el parque."
      },
      {
        pregunta: "¬øQu√© animal es s√≠mbolo del Parque Angostura?",
        opciones: [
          "Huemul",
          "C√≥ndor",
          "Zorro"
        ],
        correcta: 1,
        explicacion: "El huemul es s√≠mbolo y especie protegida en la zona."
      },
      {
        pregunta: "¬øCu√°l es la mejor √©poca para visitar el Parque?",
        opciones: [
          "Invierno",
          "Oto√±o tard√≠o",
          "Primavera/verano"
        ],
        correcta: 3,
        explicacion: "Primavera y verano ofrecen senderos m√°s accesibles y flora en flor."
      },
      {
        pregunta: "¬øQu√© medidas se promueven en el parque?",
        opciones: [
          "Cuidado del entorno",
          "Pesca intensiva",
          "Construcci√≥n libre"
        ],
        correcta: 1,
        explicacion: "Se promueve el cuidado del entorno y turismo responsable."
      },
      {
        pregunta: "¬øHay √°reas para picnic en el parque?",
        opciones: [
          "No",
          "Solo para grupos",
          "S√≠"
        ],
        correcta: 3,
        explicacion: "S√≠, hay √°reas habilitadas para picnic."
      },
      {
        pregunta: "¬øSe pueden observar aves en el Parque Angostura?",
        opciones: [
          "Solo en cautiverio",
          "S√≠",
          "No"
        ],
        correcta: 2,
        explicacion: "S√≠, es un buen lugar para la observaci√≥n de aves."
      }
    ];

    let jugador = "";
    let indice = 0;
    let puntaje = 0;

    function iniciarTrivia(){
      jugador = document.getElementById('nombreJugador').value.trim();
      if(!jugador){ alert('Por favor ingresa un nombre'); return; }
      indice=0; puntaje=0;
      document.getElementById('inicio').style.display='none';
      document.getElementById('trivia').style.display='block';
      mostrarPregunta();
    }

    function mostrarPregunta(){
      if(indice>=preguntas.length){ mostrarResultado(); return; }
      const p = preguntas[indice];
      document.getElementById('pregunta').textContent = `${indice+1}. ${p.pregunta}`;
      const opcionesDiv = document.getElementById('opciones'); opcionesDiv.innerHTML='';
      document.getElementById('feedback').innerHTML='';
      p.opciones.forEach((op,i)=>{
        const b = document.createElement('button');
        b.textContent = `${i+1}. ${op}`; b.className='btn';
        b.onclick = ()=> responder(i);
        opcionesDiv.appendChild(b);
      });
    }

    function responder(seleccion){
      const p = preguntas[indice];
      const fb = document.getElementById('feedback');
      if(seleccion===p.correcta){ puntaje++; fb.innerHTML=`<p class="correct">Respuesta correcta. ${p.explicacion}</p>`; }
      else { fb.innerHTML=`<p class="incorrect">Respuesta incorrecta. ${p.explicacion}</p>`; }
      // deshabilitar opciones
      Array.from(document.getElementById('opciones').children).forEach(x=>x.disabled=true);
      const next = document.createElement('button'); next.className='btn';
      next.textContent = (indice+1<preguntas.length)?'Siguiente':'Ver resultado';
      next.onclick = ()=>{ indice++; mostrarPregunta(); };
      fb.appendChild(next);
    }

    function mostrarResultado(){
      document.getElementById('trivia').style.display='none';
      document.getElementById('resultado').style.display='block';
      document.getElementById('mensajeFinal').textContent = `${jugador}, tu puntaje fue ${puntaje} de ${preguntas.length}`;
      const ranking = JSON.parse(localStorage.getItem('ranking')||'[]');
      ranking.push({nombre:jugador,puntaje}); localStorage.setItem('ranking',JSON.stringify(ranking));
      mostrarRanking();
    }

    function mostrarRanking(){
      const r = JSON.parse(localStorage.getItem('ranking')||'[]').sort((a,b)=>b.puntaje-a.puntaje);
      const c = document.getElementById('ranking'); c.innerHTML = '<h3>üèÜ Ranking de Participantes</h3>';
      r.forEach((j,i)=> c.innerHTML += `<p>${i+1}. ${j.nombre} ‚Äî ${j.puntaje} pts</p>`);
    }

    function reiniciar(){ indice=0; puntaje=0; jugador=''; document.getElementById('resultado').style.display='none'; document.getElementById('inicio').style.display='block'; document.getElementById('nombreJugador').value=''; }
  </script>
</body>
</html>
